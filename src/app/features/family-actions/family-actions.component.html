<div class="max-w-2xl mx-auto p-4 md:p-8" *ngIf="activeChild$ | async as child">
    <h1 class="text-4xl md:text-5xl font-display text-center text-slate-700 mb-2">Los Conductores de mi familia</h1>
    <p class="text-center text-slate-500 mb-8">Observa a tus conductores y marca las buenas acciones que veas. ¡El buen trabajo en equipo se disfruta más!</p>
    
    <div class="relative">
        <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8 printable-area">
            <div class="flex justify-between items-center border-b-2 border-slate-200 pb-4 mb-4">
                <div class="flex items-center gap-3">
                    <span class="text-4xl">{{child.avatar}}</span>
                    <span class="font-bold text-slate-700">{{child.name}}</span>
                </div>
                 <h2 class="text-xl font-display text-teal-600 text-right">Tarjeta de Observación <br/>N° {{currentCard.id}}</h2>
            </div>
            
            <div class="space-y-4 my-6">
                <label *ngFor="let consigna of currentCard.consignas; let i = index" 
                       class="flex items-center p-4 bg-slate-50 rounded-lg cursor-pointer hover:bg-slate-100">
                    <input 
                        type="checkbox" 
                        [checked]="checkboxes[i]"
                        (change)="handleCheckboxChange(i)"
                        class="h-6 w-6 rounded border-gray-300 text-teal-600 focus:ring-teal-500"
                    />
                    <span class="ml-4 text-slate-800 text-lg">{{consigna}}</span>
                </label>
            </div>
            
             <p class="text-xs text-slate-400 text-center mt-4">
                Esta es una actividad para reforzar las buenas prácticas de manejo en familia.
             </p>
        </div>
        
         <div class="no-print mt-6 flex flex-col sm:flex-row items-center justify-between gap-4">
            <button (click)="handlePrev()" 
                    [class.invisible]="currentIndex === 0"
                    class="w-full sm:w-auto px-6 py-3 bg-slate-200 text-slate-800 font-bold rounded-lg hover:bg-slate-300">
                &larr; Anterior
            </button>
            <button (click)="handlePrint()" class="w-full sm:w-auto order-first sm:order-0 px-6 py-3 bg-blue-500 text-white font-bold rounded-lg hover:bg-blue-600 flex items-center justify-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fillRule="evenodd" d="M5 4v3H4a2 2 0 00-2 2v6a2 2 0 002 2h1v-4a1 1 0 011-1h10a1 1 0 011 1v4h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z" clipRule="evenodd" /></svg>
                Imprimir Tarjeta
            </button>
            <button (click)="handleNext()" class="w-full sm:w-auto px-6 py-3 bg-slate-200 text-slate-800 font-bold rounded-lg hover:bg-slate-300">
                {{ currentIndex === totalCards - 1 ? 'Finalizar' : 'Siguiente' }} &rarr;
            </button>
        </div>
    </div>
</div>
